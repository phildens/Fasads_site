{% load static %}
<section class="articles">
  <div class="articles__container">
    <h2 class="articles__title">–°—Ç–∞—Ç—å–∏</h2>

    <div class="articles-track" id="articlesTrack" aria-label="–°–ª–∞–π–¥–µ—Ä —Å—Ç–∞—Ç–µ–π">
      <article class="article-card">
        <a href="#" class="card-link">
          <div class="card-date">–æ—Ç 30.06.2025</div>
          <h3 class="card-title">–í–∏–¥—ã –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –∫–ª–∞–¥–∫–∏ –æ–±–ª–∏—Ü–æ–≤–æ—á–Ω–æ–≥–æ –∫–∏—Ä–ø–∏—á–∞</h3>
          <p class="card-excerpt">–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–ª–∞–¥–∫–∞ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Å–æ–± –æ–±–ª–∏—Ü–æ–≤–∫–∏ —Ñ–∞—Å–∞–¥–∞, –∞‚Ä¶</p>
        </a>
      </article>

      <article class="article-card">
        <a href="#" class="card-link">
          <div class="card-date">–æ—Ç 30.06.2025</div>
          <h3 class="card-title">–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ–±–ª–∏—Ü–æ–≤–æ—á–Ω–æ–≥–æ –∫–∏—Ä–ø–∏—á–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ: –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã</h3>
          <p class="card-excerpt">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚Äî –ø–µ—Ä–≤–æ–µ, –Ω–∞ —á—Ç–æ –Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ‚Ä¶</p>
        </a>
      </article>

      <article class="article-card">
        <a href="#" class="card-link">
          <div class="card-date">–æ—Ç 30.06.2025</div>
          <h3 class="card-title">–ö–ª–∏–Ω–∫–µ—Ä–Ω—ã–π –∏–ª–∏ –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∏–π –∫–∏—Ä–ø–∏—á: –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è</h3>
          <p class="card-excerpt">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∏ –±–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏‚Ä¶</p>
        </a>
      </article>
    </div>
  </div>
</section>

<style>
  :root{
    --container: 1200px;
    --gutter: 24px;
    --gap: 40px;
    --card-bg: #3a1f1f;
    --card-text: #ffffff;
    --card-muted: rgba(255,255,255,.6);
    --radius: 18px;
  }
  *, *::before, *::after { box-sizing: border-box; }

  .articles{
    width:100%;
    max-width:100vw;     /* üîí –Ω–µ —à–∏—Ä–µ —ç–∫—Ä–∞–Ω–∞ */
    overflow-x:hidden;   /* üîí —Å–∫—Ä—ã–≤–∞–µ–º –ª—é–±—ã–µ –≤—ã–ø–∏—Ä–∞–Ω–∏—è */
    padding-block: 32px;
  }
  .articles__container{
    width:100%;
    max-width: calc(var(--container) + var(--gutter) * 2);
    margin-inline:auto;
    padding-inline: var(--gutter);
  }
  .articles__title{
    margin: 0 0 24px;
    font-weight: 700;
    color: #2b1b1b;
    font-size: clamp(24px, 2.2vw, 36px);
    line-height: 1.2;
  }

  /* –î–µ—Å–∫—Ç–æ–ø: —Ç—Ä–∏ –∫–æ–ª–æ–Ω–∫–∏ */
  .articles-track{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--gap);
    width:100%;
    max-width:100%;
  }
  .article-card{
    background: var(--card-bg);
    color: var(--card-text);
    border-radius: var(--radius);
    min-height: 454px;
    padding: 28px;
      padding-left: 40px;
    display: flex;
    flex-direction: column;
  }
  .card-link{ color:inherit; text-decoration:none; display:contents; }
  .card-date{ color: var(--card-muted); font-size:16px; margin-bottom:18px; }
  .card-title{ margin:0 0 auto; font-weight:700; font-size:clamp(20px,1.6vw,28px); line-height:1.25; }
  .card-excerpt{ margin:22px 0 0; color: var(--card-muted); font-size:18px; }

  /* –ü–ª–∞–Ω—à–µ—Ç—ã/–º–æ–±–∏–ª–∫–∏: —Å–ª–∞–π–¥–µ—Ä, –ù–ò–ß–ï–ì–û –Ω–µ —à–∏—Ä–µ —ç–∫—Ä–∞–Ω–∞ */
  @media (max-width:1023px){
    .articles__container{
      max-width:100vw;     /* üîí –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —à–∏—Ä–µ —ç–∫—Ä–∞–Ω–∞ */
      padding-inline:16px; /* –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ –ø–æ–ª—è */
    }
    .articles-track{
      display:flex;
      overflow-x:auto;
      gap:16px;
      scroll-snap-type:x mandatory;
      -webkit-overflow-scrolling:touch;
      scroll-behavior:smooth;

      /* —É–±–∏—Ä–∞–µ–º —Ñ—É–ª–ª-–±–ª–∏–¥, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–ø–∏—Ä–∞–ª–æ */
      margin-inline:0;
      padding-inline:0;
      width:100%;
      max-width:100vw;    /* üîí —Ç—Ä–µ–∫ –Ω–µ —à–∏—Ä–µ —ç–∫—Ä–∞–Ω–∞ */
    }
    .articles-track::-webkit-scrollbar{ height:0; }

    .article-card{
      flex:0 0 100%;      /* –∫–∞—Ä—Ç–æ—á–∫–∞ = 100% —à–∏—Ä–∏–Ω—ã –≤—å—é–ø–æ—Ä—Ç–∞ */
      max-width:100%;
      min-width:0;
      scroll-snap-align:start;
      min-height:400px;
      padding:22px;
      border-radius:16px;
    }
    .card-title{
      font-size:clamp(18px,5vw,22px);
      overflow-wrap:anywhere;
      word-break:break-word;
      hyphens:auto;
    }
    .card-excerpt{ font-size:16px; }
  }

  @media (max-width:600px){
    .articles__container{ padding-inline:12px; }
    .articles-track{ gap:12px; }
    .article-card{ min-height:360px; padding:18px; }
  }
  
  
  .card-date{
      font-family: Muller-regular;
font-weight: 400;
font-size: 20px;
leading-trim: NONE;
line-height: 100%;
letter-spacing: 0%;
      opacity: 50%;

  }
  .card-excerpt {
      font-family: Muller-regular;
font-weight: 400;
font-size: 20px;
leading-trim: NONE;
line-height: 100%;
letter-spacing: 0%;
      opacity: 50%;
  }
  .card-title {
      font-family: Muller-medium;
font-weight: 500;
font-size: 22px;
leading-trim: NONE;
line-height: 100%;
letter-spacing: 0%;

  }
</style>

<script>
(function(){
  const track = document.getElementById('articlesTrack');
  if (!track) return;

  let timer = null;
  const AUTOPLAY_MS = 3500;
  const isSlider = () => window.matchMedia('(max-width:1023px)').matches;

  function stepSize(){ return track.clientWidth; }

  function start(){
    stop();
    if (!isSlider()) return;
    timer = setInterval(() => {
      const nearEnd = track.scrollLeft + track.clientWidth >= track.scrollWidth - 5;
      if (nearEnd){
        track.style.scrollBehavior = 'auto';
        track.scrollTo({ left: 0 });
        requestAnimationFrame(() => track.style.scrollBehavior = 'smooth');
      } else {
        track.scrollBy({ left: stepSize(), behavior: 'smooth' });
      }
    }, AUTOPLAY_MS);
  }
  function stop(){ if (timer){ clearInterval(timer); timer = null; } }

  ['mouseenter','focusin','touchstart','pointerdown'].forEach(ev =>
    track.addEventListener(ev, stop, {passive:true})
  );
  ['mouseleave','focusout','touchend','pointerup','touchcancel'].forEach(ev =>
    track.addEventListener(ev, start, {passive:true})
  );

  let dragging=false, sx=0, sl=0;
  track.addEventListener('pointerdown', e => {
    if (!isSlider()) return;
    dragging=true; sx=e.clientX; sl=track.scrollLeft;
    track.setPointerCapture(e.pointerId);
  });
  track.addEventListener('pointermove', e => {
    if (!isSlider() || !dragging) return;
    track.scrollLeft = sl - (e.clientX - sx);
  });
  ['pointerup','pointercancel'].forEach(ev =>
    track.addEventListener(ev, () => dragging=false)
  );

  addEventListener('resize', start);
  addEventListener('orientationchange', start);
  start();
})();
</script>
